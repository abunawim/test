//V.01, For Delete

//Path save for unlink before delete
$result1 = $this->utilities->findByAttribute($table, array($attr=>$id));

//Now delete record
$res = $this->db->delete($table,array($attr=>$id));

//After record delete then unlink
if($res)
{
    if(!empty($result1->ATTACHMENT))
    {
        unlink('upload/assignments/materials/'.$result1->ATTACHMENT);
    }

}

//V.02, For update

    if($MATERIAL_FILE_PATH)
	$assi_data['ATTACHMENT']=$MATERIAL_FILE_PATH;

    $assi_data = array_merge($_POST, $assi_data);

   //Path save for unlink before update
    $result1 = $this->utilities->findByAttribute('UMS_COURSE_MATERIALS', array('CM_ID'=>$CM_ID));

   //Now update record
    $res = $this->utilities->updateData('UMS_COURSE_MATERIALS',$assi_data, array('CM_ID'=>$CM_ID));
   
   //After record update then unlink
    if($res and $MATERIAL_FILE_PATH)
    {
        if(file_exists($upload_path.$result1->ATTACHMENT))
        {
            unlink($upload_path.$result1->ATTACHMENT);
        }
    }

//v.03
